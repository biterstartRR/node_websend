<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Document</title>
  <script src="./js/ajax.js"></script>
  <style>
    * {
      margin: 0;
    }

    body {
      width: 100vw;
      height: 100vh;
      background-image: url(./img/desk.jpg);
      background-clip: inherit;
      background-position: center;
      background-size: cover;
    }

    body>div {
      width: 100vw;
      height: 100vh;
      /* background-color: aquamarine; */
      display: flex;
      justify-content: center;
      align-items: center;
    }

    #input {
      display: inline-block;
      width: 300px;
      height: 400px;
      background-color: rgba(11, 69, 116, 0.767);
      border-radius: 10px;
      border: 1px solid rgba(98, 175, 192, 0);
    }

    .inpus {
      display: inline-block;
      margin-left: 15px;
      margin-top: 20px;
      width: 240px;
      height: 50px;
      border-radius: 15px;
      border: 1px solid rgba(255, 255, 255, 0);
      background-color: rgb(246, 255, 255);
      padding-left: 15px;
    }

    #input>h1 {
      display: inline-block;
      width: 100%;
      height: 50px;
      margin-top: 40px;
      margin-bottom: 10px;
      border-radius: 10px;
      text-align: center;
      color: rgb(255, 255, 255);
      border: 1px solid rgba(255, 255, 255, 0);
      /* background-color: rgb(158, 188, 188); */
    }

    .button {
      display: inline-block;
      margin-left: 15px;
      margin-top: 20px;
      height: 50px;
      border-radius: 15px;
      border: 1px solid rgba(255, 255, 255, 0);
      background-color: rgb(246, 255, 255);
      padding-left: 15px;
      width: 260px;
      font-size: 20px;
      color: rgb(1, 49, 33);
      transition: 1s;
    }

    .button:hover {
      color: rgb(255, 255, 255);
      background-color: rgb(22, 65, 65);
    }
  </style>
</head>

<body>
  <div>
    <div id="input">
      <h1>登陆后台</h1>
      <input class="inpus" name="usename" type="text" id="user" placeholder="请输入账号" />
      <input class="inpus" name="password" type="password" id="pwd" placeholder="请填入密码" />
      <input class="button" onclick="getser()" type="submit" value="登录" />
      <script>
        function getser() {
          var username = document.getElementById("user").value;
          var password = document.getElementById("pwd").value;
          // console.log(username, password);
          if (username.length > 0 && password.length > 0) {
            ajax({
              method: 'post',
              url: 'http://localhost:3000/user/login',
              data: {
                name: username,
                password: password,
              },
              success: function (data) {
                for(i=0,j=0; i<data.length; i++) {
                  if(data[i].usename == username && data[i].passworld == password){
                    alert("登录成功");
                    location.href="./userdata.html";
                  }else{
                    j++
                    if(j == data.length){
                      alert("账号或密码有误");
                    }
                  }
                }
              }
            });
          }else{
            alert('非法的账号密码')
          }
        }
      </script>
    </div>
  </div>
</body>

</html>